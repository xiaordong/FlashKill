# 设计思路

### 一般业务流程：

客户端收到请求->（中间件）->绑定数据->调用rpc->服务端处理数据，返回结果

简单实现几个登录注册生成token的服务，这里把token当做唯一值来用，同时担当redis的键，所以不设双token

### 秒杀相关流程：

秒杀追求高效，没有采用rpc增加负荷,采用在客户端通过分布式锁来进行秒杀，即用RDB.SetNX(key, value, timeout)，通过这个命令进行加锁，但由于设置Key和超时时间是分开的，需要根据返回的result来判断是否加锁成功，加锁成功即可进入秒杀阶段，否则返回错误响应

![1728738481275.png](https://img.picui.cn/free/2024/10/12/670a73c764f34.png)

参考文章：[一文搞懂秒杀系统](https://mp.weixin.qq.com/s/PfzMnMCNng9jxx169_WDSw)（参考一小部分，全部跟着做太多了😵）

